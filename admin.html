<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administração - Casa Vincular</title>

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Estilos personalizados -->
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-custom navbar-dark sticky-top">
        <div class="container">
            <a class="navbar-brand" href="dashboard.html">
                <i class="fas fa-hands-helping me-2"></i>
                <span>Casa Vincular</span>
            </a>

            <div class="navbar-nav ms-auto">
                <div class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle text-light" href="#" role="button" data-bs-toggle="dropdown"
                        aria-expanded="false">
                        <i class="fas fa-user-shield me-1"></i>
                        <span id="userNameAdmin">Administrador</span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li><a class="dropdown-item" href="dashboard.html">
                                <i class="fas fa-home me-2"></i> Dashboard
                            </a></li>
                        <li><a class="dropdown-item" href="relatorios.html">
                                <i class="fas fa-chart-bar me-2"></i> Relatórios
                            </a></li>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <li><a class="dropdown-item" href="#" onclick="logout()">
                                <i class="fas fa-sign-out-alt me-2"></i> Sair
                            </a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <!-- Conteúdo Principal -->
    <div class="container-fluid mt-3">
        <div class="row">
            <!-- Sidebar Admin -->
            <div class="col-lg-3 col-xl-2">
                <div class="card mb-4">
                    <div class="card-body p-0">
                        <div class="list-group list-group-flush">
                            <a href="#config-servicos" class="list-group-item list-group-item-action active"
                                onclick="mostrarSecao('config-servicos')">
                                <i class="fas fa-cog me-2"></i> Serviços do Dia
                            </a>
                            <a href="#gerenciar-usuarios" class="list-group-item list-group-item-action"
                                onclick="mostrarSecao('gerenciar-usuarios')">
                                <i class="fas fa-users-cog me-2"></i> Gerenciar Usuários
                            </a>
                            <a href="#backup-dados" class="list-group-item list-group-item-action"
                                onclick="mostrarSecao('backup-dados')">
                                <i class="fas fa-database me-2"></i> Backup de Dados
                            </a>
                            <a href="#config-sistema" class="list-group-item list-group-item-action"
                                onclick="mostrarSecao('config-sistema')">
                                <i class="fas fa-sliders-h me-2"></i> Configurações do Sistema
                            </a>
                            <a href="#limpar-dados" class="list-group-item list-group-item-action text-danger"
                                onclick="mostrarSecao('limpar-dados')">
                                <i class="fas fa-broom me-2"></i> Limpeza de Dados
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Status do Sistema -->
                <div class="card">
                    <div class="card-header">
                        <h6 class="mb-0">
                            <i class="fas fa-heartbeat me-2"></i>
                            Status do Sistema
                        </h6>
                    </div>
                    <div class="card-body">
                        <div class="mb-2">
                            <small class="text-muted">Uso de Banco de Dados</small>
                            <div class="progress" style="height: 6px;">
                                <div class="progress-bar bg-success" style="width: 45%"></div>
                            </div>
                            <small class="text-muted">45% de 2.000 registros</small>
                        </div>

                        <div class="mb-2">
                            <small class="text-muted">Check-ins Hoje</small>
                            <div class="d-flex justify-content-between">
                                <span class="small">24/100+</span>
                                <span class="small text-success">
                                    <i class="fas fa-arrow-up"></i> 12%
                                </span>
                            </div>
                        </div>

                        <div class="mb-2">
                            <small class="text-muted">Último Backup</small>
                            <div class="d-flex justify-content-between">
                                <span class="small">Ontem 23:00</span>
                                <span class="small text-success">
                                    <i class="fas fa-check"></i> OK
                                </span>
                            </div>
                        </div>

                        <div class="mt-3">
                            <button class="btn btn-sm btn-outline-primary w-100" onclick="verificarSistema()">
                                <i class="fas fa-sync-alt me-1"></i> Verificar Sistema
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Conteúdo Admin -->
            <div class="col-lg-9 col-xl-10">
                <!-- Cabeçalho -->
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <div>
                        <h1 class="h3 mb-1">
                            <i class="fas fa-user-shield text-primary me-2"></i>
                            Painel Administrativo
                        </h1>
                        <p class="text-muted mb-0">
                            Gerencie configurações do sistema e dados
                        </p>
                    </div>
                    <div>
                        <span class="badge bg-warning me-2">
                            <i class="fas fa-star"></i> Acesso Administrador
                        </span>
                        <button class="btn btn-success" onclick="exportarDados()">
                            <i class="fas fa-file-export me-1"></i> Exportar Tudo
                        </button>
                    </div>
                </div>

                <!-- Seção: Configuração de Serviços -->
                <div class="card mb-4" id="config-servicos">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">
                            <i class="fas fa-cog me-2"></i>
                            Configuração de Serviços do Dia
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="alert alert-info mb-4">
                            <i class="fas fa-info-circle me-2"></i>
                            Configure quais serviços estarão disponíveis para check-in hoje.
                            Alterações afetam imediatamente todas as estações de trabalho.
                        </div>

                        <form id="formServicos">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="card h-100">
                                        <div class="card-body text-center">
                                            <div class="mb-3">
                                                <i class="fas fa-mug-hot fa-3x text-success"></i>
                                            </div>
                                            <h5>Café da Manhã</h5>
                                            <p class="text-muted small">Serviço básico diário</p>
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="servicoCafe" checked
                                                    disabled>
                                                <label class="form-check-label" for="servicoCafe">
                                                    Sempre ativo
                                                </label>
                                            </div>
                                            <div class="mt-3">
                                                <small class="text-muted">
                                                    <i class="fas fa-users"></i> 22 atendidos hoje
                                                </small>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-4">
                                    <div class="card h-100">
                                        <div class="card-body text-center">
                                            <div class="mb-3">
                                                <i class="fas fa-shower fa-3x text-info"></i>
                                            </div>
                                            <h5>Banho</h5>
                                            <p class="text-muted small">Capacidade: 2 por vez</p>
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="servicoBanho"
                                                    checked>
                                                <label class="form-check-label" for="servicoBanho">
                                                    Ativar serviço
                                                </label>
                                            </div>
                                            <div class="mt-3">
                                                <div class="mb-2">
                                                    <label class="form-label small">Tempo estimado (min)</label>
                                                    <input type="number" class="form-control form-control-sm" value="15"
                                                        min="5" max="60">
                                                </div>
                                                <small class="text-muted">
                                                    <i class="fas fa-clock"></i> 15 min/pessoa
                                                </small>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-4">
                                    <div class="card h-100">
                                        <div class="card-body text-center">
                                            <div class="mb-3">
                                                <i class="fas fa-cut fa-3x text-warning"></i>
                                            </div>
                                            <h5>Corte de Cabelo</h5>
                                            <p class="text-muted small">Capacidade: 1 por vez</p>
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="servicoCorte"
                                                    checked>
                                                <label class="form-check-label" for="servicoCorte">
                                                    Ativar serviço
                                                </label>
                                            </div>
                                            <div class="mt-3">
                                                <div class="mb-2">
                                                    <label class="form-label small">Tempo estimado (min)</label>
                                                    <input type="number" class="form-control form-control-sm" value="10"
                                                        min="5" max="60">
                                                </div>
                                                <small class="text-muted">
                                                    <i class="fas fa-clock"></i> 10 min/pessoa
                                                </small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Configurações Adicionais -->
                            <div class="row mt-4">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="horarioFuncionamento" class="form-label">
                                            <i class="fas fa-clock me-1"></i> Horário de Funcionamento
                                        </label>
                                        <div class="input-group">
                                            <input type="time" class="form-control" value="07:00">
                                            <span class="input-group-text">às</span>
                                            <input type="time" class="form-control" value="17:00">
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="limiteDiario" class="form-label">
                                            <i class="fas fa-users me-1"></i> Limite Diário (opcional)
                                        </label>
                                        <input type="number" class="form-control"
                                            placeholder="Ex: 100 (deixe em branco para ilimitado)">
                                    </div>
                                </div>
                            </div>

                            <div class="d-flex justify-content-between align-items-center mt-4 pt-3 border-top">
                                <div class="form-text">
                                    <i class="fas fa-exclamation-triangle text-warning me-1"></i>
                                    Alterações são aplicadas imediatamente
                                </div>
                                <div>
                                    <button type="button" class="btn btn-secondary me-2" onclick="restaurarPadrao()">
                                        <i class="fas fa-undo me-1"></i> Restaurar Padrão
                                    </button>
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-save me-1"></i> Salvar Configurações
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Seção: Gerenciar Usuários -->
                <div class="card mb-4 d-none" id="gerenciar-usuarios">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i class="fas fa-users-cog me-2"></i>
                            Gerenciar Usuários do Sistema
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <div>
                                <p class="text-muted mb-0">
                                    Gerencie voluntários e administradores do sistema
                                </p>
                            </div>
                            <button class="btn btn-success" onclick="mostrarModalNovoUsuario()">
                                <i class="fas fa-user-plus me-1"></i> Novo Usuário
                            </button>
                        </div>

                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Nome</th>
                                        <th>E-mail</th>
                                        <th>Tipo</th>
                                        <th>Último Acesso</th>
                                        <th>Status</th>
                                        <th>Ações</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <i class="fas fa-user-shield text-primary me-2"></i>
                                                <div>
                                                    <strong>Administrador</strong>
                                                    <div class="small text-muted">Super usuário</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>admin@casavincular.com</td>
                                        <td>
                                            <span class="badge bg-primary">Administrador</span>
                                        </td>
                                        <td>Hoje 08:30</td>
                                        <td>
                                            <span class="badge bg-success">
                                                <i class="fas fa-circle"></i> Ativo
                                            </span>
                                        </td>
                                        <td>
                                            <button class="btn btn-sm btn-outline-primary me-1">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="btn btn-sm btn-outline-danger" disabled>
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <i class="fas fa-user text-success me-2"></i>
                                                <div>
                                                    <strong>Voluntário 1</strong>
                                                    <div class="small text-muted">Atendimento</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>voluntario@casavincular.com</td>
                                        <td>
                                            <span class="badge bg-success">Voluntário</span>
                                        </td>
                                        <td>Hoje 09:15</td>
                                        <td>
                                            <span class="badge bg-success">
                                                <i class="fas fa-circle"></i> Ativo
                                            </span>
                                        </td>
                                        <td>
                                            <button class="btn btn-sm btn-outline-primary me-1">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="btn btn-sm btn-outline-danger">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <i class="fas fa-user text-info me-2"></i>
                                                <div>
                                                    <strong>João Silva</strong>
                                                    <div class="small text-muted">Recepção</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>joao@casavincular.com</td>
                                        <td>
                                            <span class="badge bg-success">Voluntário</span>
                                        </td>
                                        <td>Ontem 14:20</td>
                                        <td>
                                            <span class="badge bg-warning">
                                                <i class="fas fa-circle"></i> Inativo
                                            </span>
                                        </td>
                                        <td>
                                            <button class="btn btn-sm btn-outline-primary me-1">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="btn btn-sm btn-outline-danger">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Seção: Backup de Dados -->
                <div class="card mb-4 d-none" id="backup-dados">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i class="fas fa-database me-2"></i>
                            Backup e Restauração de Dados
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h5 class="card-title">
                                            <i class="fas fa-download text-primary me-2"></i>
                                            Backup Manual
                                        </h5>
                                        <p class="card-text">
                                            Faça um backup completo de todos os dados do sistema.
                                        </p>
                                        <div class="mb-3">
                                            <label class="form-label">Incluir:</label>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="backupPessoas"
                                                    checked>
                                                <label class="form-check-label" for="backupPessoas">
                                                    Cadastros de pessoas
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="backupCheckins"
                                                    checked>
                                                <label class="form-check-label" for="backupCheckins">
                                                    Histórico de check-ins
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="backupConfig"
                                                    checked>
                                                <label class="form-check-label" for="backupConfig">
                                                    Configurações do sistema
                                                </label>
                                            </div>
                                        </div>
                                        <button class="btn btn-primary w-100" onclick="fazerBackup()">
                                            <i class="fas fa-database me-1"></i> Fazer Backup Agora
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h5 class="card-title">
                                            <i class="fas fa-upload text-success me-2"></i>
                                            Restauração
                                        </h5>
                                        <p class="card-text">
                                            Restaure dados a partir de um backup anterior.
                                        </p>
                                        <div class="mb-3">
                                            <label for="arquivoBackup" class="form-label">
                                                Selecione o arquivo de backup
                                            </label>
                                            <input type="file" class="form-control" id="arquivoBackup"
                                                accept=".json,.csv">
                                        </div>
                                        <div class="alert alert-warning">
                                            <i class="fas fa-exclamation-triangle me-2"></i>
                                            A restauração substituirá todos os dados atuais.
                                            Faça um backup antes de restaurar.
                                        </div>
                                        <button class="btn btn-success w-100" onclick="restaurarBackup()">
                                            <i class="fas fa-upload me-1"></i> Restaurar Backup
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Backups Automáticos -->
                        <div class="card mt-4">
                            <div class="card-header">
                                <h6 class="mb-0">
                                    <i class="fas fa-robot me-2"></i>
                                    Backups Automáticos
                                </h6>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-8">
                                        <div class="mb-3">
                                            <label class="form-label">Frequência de Backup Automático</label>
                                            <select class="form-select" id="frequenciaBackup">
                                                <option value="diario">Diário (recomendado)</option>
                                                <option value="semanal">Semanal</option>
                                                <option value="mensal">Mensal</option>
                                                <option value="desativado">Desativado</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Horário do Backup</label>
                                            <input type="time" class="form-control" value="23:00">
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="d-flex h-100 align-items-center">
                                            <div class="text-center w-100">
                                                <i class="fas fa-cloud fa-3x text-info mb-3"></i>
                                                <p class="small text-muted mb-0">
                                                    Último automático: Ontem 23:00
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="d-flex justify-content-between align-items-center mt-3">
                                    <small class="text-muted">
                                        Backups são armazenados localmente no navegador
                                    </small>
                                    <button class="btn btn-sm btn-outline-primary">
                                        <i class="fas fa-save me-1"></i> Salvar Configuração
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Seção: Configurações do Sistema -->
                <div class="card mb-4 d-none" id="config-sistema">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i class="fas fa-sliders-h me-2"></i>
                            Configurações do Sistema
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <h6 class="mb-0">
                                            <i class="fas fa-language me-2"></i>
                                            Interface
                                        </h6>
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <label class="form-label">Idioma</label>
                                            <select class="form-select">
                                                <option selected>Português (Brasil)</option>
                                                <option>Inglês</option>
                                                <option>Espanhol</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Tema de Cores</label>
                                            <select class="form-select">
                                                <option selected>Azul (Padrão)</option>
                                                <option>Verde</option>
                                                <option>Vermelho</option>
                                                <option>Escuro</option>
                                            </select>
                                        </div>
                                        <div class="form-check form-switch mb-3">
                                            <input class="form-check-input" type="checkbox" id="animacoes" checked>
                                            <label class="form-check-label" for="animacoes">
                                                Animações na interface
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <h6 class="mb-0">
                                            <i class="fas fa-shield-alt me-2"></i>
                                            Segurança
                                        </h6>
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <label class="form-label">Tempo de Sessão (minutos)</label>
                                            <input type="number" class="form-control" value="120" min="15" max="480">
                                            <div class="form-text">
                                                Tempo de inatividade antes do logout automático
                                            </div>
                                        </div>
                                        <div class="form-check form-switch mb-3">
                                            <input class="form-check-input" type="checkbox" id="logAcoes" checked>
                                            <label class="form-check-label" for="logAcoes">
                                                Registrar todas as ações
                                            </label>
                                        </div>
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="confirmacoes" checked>
                                            <label class="form-check-label" for="confirmacoes">
                                                Pedir confirmação para ações importantes
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h6 class="mb-0">
                                    <i class="fas fa-print me-2"></i>
                                    Relatórios e Exportação
                                </h6>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label">Formato de Exportação Padrão</label>
                                            <select class="form-select">
                                                <option selected>CSV (Excel)</option>
                                                <option>PDF</option>
                                                <option>JSON</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label">Dados em Relatórios</label>
                                            <select class="form-select">
                                                <option selected>Últimos 30 dias</option>
                                                <option>Últimos 7 dias</option>
                                                <option>Últimos 90 dias</option>
                                                <option>Todo o histórico</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="d-flex justify-content-between align-items-center">
                                    <small class="text-muted">
                                        Configurações aplicam-se a todos os usuários
                                    </small>
                                    <button class="btn btn-primary">
                                        <i class="fas fa-save me-1"></i> Salvar Todas as Configurações
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Seção: Limpeza de Dados -->
                <div class="card mb-4 d-none" id="limpar-dados">
                    <div class="card-header bg-danger text-white">
                        <h5 class="mb-0">
                            <i class="fas fa-broom me-2"></i>
                            Limpeza e Manutenção de Dados
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="alert alert-danger">
                            <i class="fas fa-exclamation-triangle me-2"></i>
                            <strong>Atenção:</strong> As ações nesta seção são irreversíveis.
                            Faça um backup antes de prosseguir.
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="card mb-4 border-danger">
                                    <div class="card-body">
                                        <h5 class="card-title text-danger">
                                            <i class="fas fa-eraser me-2"></i>
                                            Limpar Dados Antigos
                                        </h5>
                                        <p class="card-text">
                                            Remova check-ins antigos para liberar espaço.
                                        </p>
                                        <div class="mb-3">
                                            <label class="form-label">Remover check-ins mais antigos que:</label>
                                            <select class="form-select" id="periodoLimpeza">
                                                <option value="30">30 dias</option>
                                                <option value="90">90 dias</option>
                                                <option value="180">6 meses</option>
                                                <option value="365">1 ano</option>
                                                <option value="all">Todo o histórico</option>
                                            </select>
                                        </div>
                                        <div class="alert alert-warning">
                                            <i class="fas fa-info-circle me-2"></i>
                                            Esta ação removerá aproximadamente <strong>1.245 registros</strong>
                                        </div>
                                        <button class="btn btn-outline-danger w-100" onclick="limparDadosAntigos()">
                                            <i class="fas fa-eraser me-1"></i> Limpar Dados Antigos
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="card mb-4 border-danger">
                                    <div class="card-body">
                                        <h5 class="card-title text-danger">
                                            <i class="fas fa-trash-alt me-2"></i>
                                            Resetar Sistema
                                        </h5>
                                        <p class="card-text">
                                            Remova todos os dados e reinicie o sistema.
                                        </p>
                                        <div class="mb-3">
                                            <label class="form-label">Selecione o que resetar:</label>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="resetCheckins">
                                                <label class="form-check-label" for="resetCheckins">
                                                    Todos os check-ins
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="resetPessoas">
                                                <label class="form-check-label" for="resetPessoas">
                                                    Cadastros de pessoas
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="resetConfig">
                                                <label class="form-check-label" for="resetConfig">
                                                    Configurações do sistema
                                                </label>
                                            </div>
                                        </div>
                                        <div class="alert alert-danger">
                                            <i class="fas fa-exclamation-triangle me-2"></i>
                                            Esta ação <strong>não pode ser desfeita</strong>
                                        </div>
                                        <button class="btn btn-danger w-100" onclick="resetarSistema()">
                                            <i class="fas fa-bomb me-1"></i> Resetar Sistema
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="text-center">
                            <button class="btn btn-success" onclick="exportarDados()">
                                <i class="fas fa-database me-1"></i> Fazer Backup Antes de Qualquer Limpeza
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Novo Usuário -->
    <div class="modal fade" id="modalNovoUsuario" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-user-plus me-2"></i>
                        Adicionar Novo Usuário
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="formNovoUsuario">
                        <div class="mb-3">
                            <label for="nomeUsuario" class="form-label">Nome Completo</label>
                            <input type="text" class="form-control" id="nomeUsuario" required>
                        </div>
                        <div class="mb-3">
                            <label for="emailUsuario" class="form-label">E-mail</label>
                            <input type="email" class="form-control" id="emailUsuario" required>
                        </div>
                        <div class="mb-3">
                            <label for="tipoUsuario" class="form-label">Tipo de Usuário</label>
                            <select class="form-select" id="tipoUsuario" required>
                                <option value="">Selecione...</option>
                                <option value="voluntario">Voluntário</option>
                                <option value="admin">Administrador</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="senhaUsuario" class="form-label">Senha Temporária</label>
                            <input type="password" class="form-control" id="senhaUsuario" required>
                            <div class="form-text">
                                O usuário deverá alterar a senha no primeiro login
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        Cancelar
                    </button>
                    <button type="button" class="btn btn-primary" onclick="salvarNovoUsuario()">
                        <i class="fas fa-save me-1"></i> Salvar Usuário
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Scripts da página -->
    <script>
        // =========== INICIALIZAÇÃO ===========
        document.addEventListener('DOMContentLoaded', function () {
            // Verificar login e permissões
            const usuario = JSON.parse(localStorage.getItem('usuario'));
            if (!usuario) {
                window.location.href = 'index.html';
                return;
            }

            // Verificar se é admin
            if (usuario.tipo !== 'admin') {
                alert('Acesso restrito a administradores!');
                window.location.href = 'dashboard.html';
                return;
            }

            document.getElementById('userNameAdmin').textContent = usuario.nome;

            // Mostrar primeira seção
            mostrarSecao('config-servicos');
        });

        // =========== NAVEGAÇÃO ENTRE SEÇÕES ===========
        function mostrarSecao(secaoId) {
            // Esconder todas as seções
            document.querySelectorAll('[id^="config-servicos"], [id^="gerenciar-usuarios"], [id^="backup-dados"], [id^="config-sistema"], [id^="limpar-dados"]')
                .forEach(el => el.classList.add('d-none'));

            // Mostrar a seção selecionada
            document.getElementById(secaoId).classList.remove('d-none');

            // Atualizar menu ativo
            document.querySelectorAll('.list-group-item').forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('href') === `#${secaoId}`) {
                    item.classList.add('active');
                }
            });
        }

        // =========== FUNÇÕES DA SEÇÃO SERVIÇOS ===========
        document.getElementById('formServicos').addEventListener('submit', function (e) {
            e.preventDefault();

            const servicoBanho = document.getElementById('servicoBanho').checked;
            const servicoCorte = document.getElementById('servicoCorte').checked;

            // Simular salvamento
            console.log('Configurações salvas:', {
                banhoAtivo: servicoBanho,
                corteAtivo: servicoCorte
            });

            // Mostrar mensagem de sucesso
            mostrarMensagem('Configurações salvas com sucesso!', 'success');
        });

        function restaurarPadrao() {
            if (confirm('Restaurar configurações padrão?')) {
                document.getElementById('servicoBanho').checked = true;
                document.getElementById('servicoCorte').checked = true;

                mostrarMensagem('Configurações restauradas para o padrão.', 'info');
            }
        }

        // =========== FUNÇÕES DA SEÇÃO USUÁRIOS ===========
        function mostrarModalNovoUsuario() {
            const modal = new bootstrap.Modal(document.getElementById('modalNovoUsuario'));
            modal.show();
        }

        function salvarNovoUsuario() {
            const nome = document.getElementById('nomeUsuario').value.trim();
            const email = document.getElementById('emailUsuario').value.trim();
            const tipo = document.getElementById('tipoUsuario').value;
            const senha = document.getElementById('senhaUsuario').value;

            if (!nome || !email || !tipo || !senha) {
                alert('Por favor, preencha todos os campos.');
                return;
            }

            // Simular salvamento
            console.log('Novo usuário:', { nome, email, tipo });

            // Fechar modal
            bootstrap.Modal.getInstance(document.getElementById('modalNovoUsuario')).hide();

            // Limpar formulário
            document.getElementById('formNovoUsuario').reset();

            mostrarMensagem(`Usuário ${nome} adicionado com sucesso!`, 'success');
        }

        // =========== FUNÇÕES DA SEÇÃO BACKUP ===========
        function fazerBackup() {
            // Simular criação de backup
            const backupData = {
                data: new Date().toISOString(),
                pessoas: 124,
                checkins: 1245,
                configuracoes: { version: '1.0' }
            };

            // Criar arquivo JSON
            const dataStr = JSON.stringify(backupData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);

            // Criar link de download
            const exportFileDefaultName = `backup_casa_vincular_${new Date().toISOString().split('T')[0]}.json`;
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();

            mostrarMensagem('Backup criado e baixado com sucesso!', 'success');
        }

        function restaurarBackup() {
            const fileInput = document.getElementById('arquivoBackup');
            if (!fileInput.files.length) {
                alert('Por favor, selecione um arquivo de backup.');
                return;
            }

            if (!confirm('ATENÇÃO: Esta ação substituirá todos os dados atuais. Continuar?')) {
                return;
            }

            const file = fileInput.files[0];
            const reader = new FileReader();

            reader.onload = function (e) {
                try {
                    const backupData = JSON.parse(e.target.result);
                    console.log('Dados do backup:', backupData);

                    // Aqui você restauraria os dados no sistema real
                    mostrarMensagem('Backup restaurado com sucesso! Reinicie o sistema.', 'success');
                } catch (error) {
                    alert('Erro ao ler o arquivo de backup: ' + error.message);
                }
            };

            reader.readAsText(file);
        }

        // =========== FUNÇÕES DA SEÇÃO LIMPEZA ===========
        function limparDadosAntigos() {
            const periodo = document.getElementById('periodoLimpeza').value;

            let mensagem = 'Remover check-ins mais antigos que ';
            if (periodo === 'all') {
                mensagem += 'todo o histórico?';
            } else {
                mensagem += `${periodo} dias?`;
            }

            if (!confirm(mensagem + '\n\nEsta ação não pode ser desfeita.')) {
                return;
            }

            // Simular limpeza
            console.log('Limpando dados antigos...');

            mostrarMensagem('Dados antigos removidos com sucesso!', 'success');
        }

        function resetarSistema() {
            const resetCheckins = document.getElementById('resetCheckins').checked;
            const resetPessoas = document.getElementById('resetPessoas').checked;
            const resetConfig = document.getElementById('resetConfig').checked;

            if (!resetCheckins && !resetPessoas && !resetConfig) {
                alert('Selecione pelo menos uma opção para resetar.');
                return;
            }

            if (!confirm('ATENÇÃO: Esta ação apagará permanentemente os dados selecionados.\n\nDeseja continuar?')) {
                return;
            }

            // Simular reset
            console.log('Resetando sistema...', { resetCheckins, resetPessoas, resetConfig });

            mostrarMensagem('Sistema resetado com sucesso!', 'success');

            // Redirecionar após 3 segundos
            setTimeout(() => {
                window.location.href = 'index.html';
            }, 3000);
        }

        // =========== FUNÇÕES GERAIS ===========
        function exportarDados() {
            // Simular exportação completa
            const dados = {
                exportadoEm: new Date().toISOString(),
                totalRegistros: 1500
            };

            const dataStr = JSON.stringify(dados, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);
            const exportFileDefaultName = `exportacao_completa_${new Date().toISOString().split('T')[0]}.json`;

            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();

            mostrarMensagem('Exportação iniciada!', 'success');
        }

        function verificarSistema() {
            // Simular verificação
            const problemas = [
                '✓ Sistema operacional normalmente',
                '✓ Banco de dados acessível',
                '✓ Backups em dia',
                '⏱️ Última manutenção: 2 dias atrás'
            ];

            alert('Verificação do Sistema:\n\n' + problemas.join('\n'));
        }

        function mostrarMensagem(texto, tipo) {
            // Criar elemento de mensagem
            const mensagemDiv = document.createElement('div');
            mensagemDiv.className = `alert alert-${tipo} alert-dismissible fade show position-fixed top-0 end-0 m-3`;
            mensagemDiv.style.zIndex = '1050';
            mensagemDiv.style.maxWidth = '350px';

            const icon = tipo === 'success' ? 'fa-check-circle' :
                tipo === 'danger' ? 'fa-exclamation-circle' : 'fa-info-circle';

            mensagemDiv.innerHTML = `
                <i class="fas ${icon} me-2"></i>
                ${texto}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;

            document.body.appendChild(mensagemDiv);

            // Remover automaticamente após 5 segundos
            setTimeout(() => {
                if (mensagemDiv.parentNode) {
                    mensagemDiv.remove();
                }
            }, 5000);
        }

        function logout() {
            localStorage.removeItem('usuario');
            window.location.href = 'index.html';
        }
    </script>

    <!-- Estilos adicionais -->
    <style>
        .list-group-item.active {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }

        .card-header.bg-primary {
            background-color: var(--primary-color) !important;
        }

        .border-danger {
            border-color: var(--danger-color) !important;
        }

        .progress {
            border-radius: 10px;
        }

        .form-switch .form-check-input {
            width: 3em;
            height: 1.5em;
        }

        .alert-dismissible {
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .table th {
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            color: #6c757d;
        }

        .card-hover {
            transition: transform 0.2s;
        }

        .card-hover:hover {
            transform: translateY(-3px);
        }
    </style>
</body>

</html>